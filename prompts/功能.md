# Pipeak 项目功能分析

## 1. 核心理念

Pipeak 是一个专注、高效的在线训练平台，其核心目标是帮助用户通过 **“学习-练习-反馈-复习”** 的科学闭环，快速掌握 LaTeX 数学公式的键盘输入方法。项目的设计哲学融合了系统化教学、实战导向和基于艾宾浩斯遗忘曲线的智能复习算法（SM-2），旨在提供个性化且高效的学习体验。

---

## 2. 主要功能模块

### 2.1. 用户认证与管理

系统提供了一套完整的用户管理机制，支持多种登录方式，并区分不同用户模式。

- **功能点:**
  - **常规注册/登录:** 用户可以使用邮箱和密码进行注册和登录。
  - **OAuth 2.0 快速登录:** 集成了 Google OAuth，允许用户一键登录。
  - **会话管理:** 使用 JWT (JSON Web Tokens) 进行无状态认证，支持访问令牌 (Access Token) 和刷新令牌 (Refresh Token) 机制，保证了安全性和良好的用户体验。
  - **游客模式 (Guest Mode):** 允许未登录用户体验部分核心功能（如离线练习），降低了新用户的使用门槛。
  - **用户信息获取:** 提供接口让登录用户可以随时获取自己的个人信息和学习进度。

- **关键文件:**
  - `backend/app/routes/auth.py`: 处理所有认证相关的 API 请求，包括注册、登录、刷新 Token 和 Google OAuth 回调。
  - `frontend/src/stores/authStore.js`: 使用 Zustand 管理前端的用户认证状态，包括 `user`, `accessToken` 等。
  - `frontend/src/pages/LoginPage.jsx`, `RegisterPage.jsx`: 用户登录和注册的 UI 界面。
  - `frontend/src/components/auth/`: 包含第三方登录按钮等可复用认证组件。

### 2.2. 课程学习模块 (Lessons)

项目提供了一个结构化的课程体系，引导用户从零开始逐步掌握 LaTeX。

- **功能点:**
  - **系统化课程:** 包含 10 个精心设计的课程，内容从基础语法覆盖到高级应用。
  - **多语言内容:** 课程内容支持中英文切换，后端根据请求参数动态返回相应语言的课程数据。
  - **交互式学习:** 课程卡片不仅包含理论知识点（使用 Markdown 和 KaTeX 渲染），还嵌入了实战练习题。
  - **进度跟踪:** 系统会记录每个用户对每个课程的完成状态，并在课程列表中直观展示。

- **关键文件:**
  - `backend/app/routes/lessons.py`: 提供获取课程列表、课程详情以及标记课程完成的 API。
  - `backend/app/models/lesson.py`: 定义了课程的数据结构。
  - `frontend/src/pages/LessonPage.jsx`: 用户学习单个课程的页面，负责渲染课程内容和交互。
  - `frontend/src/stores/lessonStore.js`: 缓存和管理前端的课程数据。

### 2.3. 练习模块 (Practice)

练习是平台的核心，强调“学以致用”和即时反馈。

- **功能点:**
  - **实时预览:** 提供一个 LaTeX 编辑器，用户输入代码时可即时看到渲染后的数学公式。
  - **智能答案校验:** 后端具备强大的 LaTeX 语法标准化能力，能识别多种语义等价的正确答案，而不仅仅是字符串匹配。
  - **渐进式提示:** 当用户回答错误时，系统可以提供分步的、有层次的提示，引导用户独立解决问题。
  - **离线练习:** 提供一个无需登录和网络连接的离线练习页面，方便用户随时随地巩固知识。
  - **练习记录与统计:** 后端会记录每一次练习提交，并据此分析用户的练习次数、正确率等数据。

- **关键文件:**
  - `backend/app/routes/practice.py`: 处理练习答案的提交、获取提示和查询练习进度的 API。
  - `frontend/src/components/PracticeCard.jsx`, `LaTeXEditor.jsx`: 构成练习界面的核心组件。
  - `frontend/src/pages/OfflinePracticePage.jsx`: 离线练习功能的实现。
  - `frontend/src/utils/answerValidation.js`: (可能存在) 前端初步的答案格式校验。

### 2.4. 智能复习中心 (Review)

这是项目区别于普通练习平台的核心智能化功能，旨在帮助用户对抗遗忘。

- **功能点:**
  - **基于 SM-2 算法:** 采用经过科学验证的间隔重复算法 (SuperMemo-2) 来安排复习计划。
  - **个性化复习计划:** 系统根据用户对每个知识点的掌握程度（通过练习和复习的回答质量判断）动态计算下一次最佳复习时间。
  - **每日复习任务:** 用户每天登录后，系统会生成一个“今日到期”的复习列表。
  - **遗忘曲线可视化:** (可能存在) 前端页面会以图表形式展示用户的遗忘曲线和复习效果。

- **关键文件:**
  - `backend/app/routes/reviews.py`: 提供获取今日复习任务、提交复习结果、查询复习统计的 API。
  - `backend/app/models/review.py`: 实现了 SM-2 算法的核心逻辑，管理每个复习项的状态。
  - `frontend/src/pages/ReviewPage.jsx`: 用户进行复习操作的主界面。
  - `frontend/src/utils/forgettingCurve.js`: (可能存在) 前端用于计算或展示遗忘曲线的辅助工具。

### 2.5. 仪表盘与数据统计 (Dashboard)

为用户提供学习成果的可视化展示，增强学习动力。

- **功能点:**
  - **学习进度总览:** 以图表和数字形式展示已完成课程、掌握的知识点数量。
  - **练习统计:** 分析用户的总练习次数、正确率、各难度题目表现等。
  - **复习统计:** 展示复习强度、记忆持久度等与智能复习系统相关的数据。

- **关键文件:**
  - `frontend/src/pages/DashboardPage.jsx`: 仪表盘主页面。
  - 后端各个 `stats` 接口，如 `practice/stats`, `reviews/stats`。

### 2.6. 用户体验与辅助功能

- **国际化 (i18n):** 前端使用 `i18next` 库，支持中英文界面切换。
- **主题切换:** 支持明亮和黑暗两种主题模式，并能跟随系统设置。
- **响应式设计:** 界面使用 Tailwind CSS 构建，能良好适配桌面、平板和手机设备。
- **API 性能优化:** 后端在某些请求中使用了简单的缓存机制来避免重复计算。
