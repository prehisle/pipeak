# Pipeak 项目结构分析

## 1. 总体架构

Pipeak 是一个全栈 Web 应用项目，旨在提供一个在线学习和练习平台（特别是针对 LaTeX）。其核心架构分为三个主要部分：

- **前端 (Frontend):** 使用现代 JavaScript 技术栈（React, Vite, Tailwind CSS）构建的单页应用 (SPA)，负责所有用户界面和交互。
- **后端 (Backend):** 使用 Python 和 Flask 框架构建的 RESTful API 服务器，负责业务逻辑、数据存储和用户认证。
- **部署:** 包含 `vercel.json` 配置文件，表明项目已配置为通过 Vercel 进行部署。

项目还包含一个备用的 TypeScript 后端 (`backend-ts`)，但从文件结构和完整度来看，Python 后端是当前主要使用的实现。

---

## 2. 前端 (`frontend/`)

前端是一个功能丰富的客户端应用程序，为用户提供动态、响应式的学习体验。

- **技术栈:**
  - **框架/库:** React
  - **构建工具:** Vite
  - **样式:** Tailwind CSS
  - **路由:** React Router (`react-router-dom`)
  - **状态管理:** Zustand
  - **API 请求:** Axios
  - **国际化:** i18next (`react-i18next`)
  - **内容渲染:**
    - `react-markdown` 用于渲染 Markdown 文本。
    - `katex` 用于渲染数学公式 (LaTeX)。

- **目录结构:**
  - `src/`: 源代码根目录。
  - `src/main.jsx`: 应用入口文件，初始化 React 应用。
  - `src/components/`: 可复用的 UI 组件。
    - `ui/`: 基础 UI 元素（如 `Button.jsx`, `Card.jsx`）。
    - `auth/`: 认证相关组件（如 `GoogleLoginButton.jsx`）。
    - 其他为特定功能的展示组件（如 `PracticeCard.jsx`, `LaTeXEditor.jsx`）。
  - `src/pages/`: 页面级组件，对应不同的应用路由（如 `HomePage.jsx`, `DashboardPage.jsx`, `LessonPage.jsx`）。
  - `src/services/`: 与后端 API 交互的服务层，封装了网络请求逻辑。
  - `src/stores/`: 使用 Zustand 进行全局状态管理，如 `authStore.js` 管理用户认证状态，`lessonStore.js` 管理课程数据。
  - `src/hooks/`: 自定义的 React Hooks，用于封装可复用逻辑。
  - `src/i18n/`: 国际化配置和语言文件（`en-US.json`, `zh-CN.json`）。
  - `src/utils/`: 前端工具函数。

---

## 3. 后端 (`backend/`)

后端提供数据和业务逻辑，通过 RESTful API 与前端通信。

- **技术栈:**
  - **框架:** Flask
  - **数据库:** MongoDB (通过 `pymongo` 连接)
  - **认证:** 使用 `Flask-JWT-Extended` 实现基于 JWT (JSON Web Token) 的认证。
  - **OAuth:** 使用 `authlib` 实现 OAuth 登录流程。
  - **对象序列化/反序列化:** Marshmallow
  - **WSGI 服务器:** Gunicorn
  - **依赖管理:** `pip` 和 `requirements.txt`

- **目录结构:**
  - `run.py`: 应用启动脚本。
  - `config.py`: 配置文件，用于管理环境变量和应用设置。
  - `app/`: Flask 应用的核心模块，遵循应用工厂模式。
    - `__init__.py`: 应用工厂 `create_app()`，创建和配置 Flask 实例。
    - `models/`: 定义与 MongoDB 集合对应的结构，但未使用传统 ORM。更像是数据结构的定义。
    - `routes/`: API 路由（蓝图），处理 HTTP 请求并提供端点。
    - `admin/`: 专门用于管理后台的路由和逻辑。
    - `utils/`: 后端工具函数，如数据库初始化、安全相关功能。
  - `translations/`: 用于存储后端生成的课程内容的翻译文件。

---

## 4. 备用后端 (`backend-ts/`)

- 这是一个使用 TypeScript 编写的 Node.js 项目。
- 目录中包含 `node_modules`，但从外层文件列表看，缺少 `package.json` 等关键配置文件，可能是一个正在开发、实验性或已被废弃的替代方案。

---

## 5. 文档与配置

- `docs/`: 包含项目开发、安装、OAuth 设置等重要技术文档。
- `.github/workflows/`: 包含 GitHub Actions 的 CI/CD 工作流配置。
- `LICENSE`, `README.md`: 标准的项目开源文件。
- `screenshots/`: 包含用于文档和 README 的应用截图。
