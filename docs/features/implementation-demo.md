# æ™ºèƒ½åé¦ˆç³»ç»Ÿå®ç°æ¼”ç¤º

## åŠŸèƒ½æ¦‚è¿°

æˆ‘å·²ç»è®¾è®¡å¹¶å®ç°äº†ç”¨æˆ·å»ºè®®çš„ä¸¤ä¸ªæ ¸å¿ƒåŠŸèƒ½ï¼š

1. **"æ­£ç¡®ä½†ä¸è§„èŒƒ"è­¦å‘Šæœºåˆ¶** âœ…
2. **LaTeXæœ€ä½³å®è·µæç¤ºåŠŸèƒ½** âœ…

## å®ç°æ¶æ„

### 1. åç«¯æ¶æ„

```
backend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â””â”€â”€ standardness_checker.py    # è§„èŒƒæ€§æ£€æŸ¥å™¨
â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â””â”€â”€ practice.py                # å¢å¼ºçš„éªŒè¯å‡½æ•°
â”‚   â””â”€â”€ data/
â”‚       â””â”€â”€ best_practices.json       # æœ€ä½³å®è·µå†…å®¹
```

### 2. å‰ç«¯æ¶æ„

```
frontend/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ EnhancedFeedback.jsx      # å¢å¼ºåé¦ˆç»„ä»¶
```

## æ ¸å¿ƒåŠŸèƒ½æ¼”ç¤º

### 1. è§„èŒƒæ€§æ£€æŸ¥å™¨

```python
# æ£€æŸ¥ä¸Šä¸‹æ ‡é¡ºåº
input: "x^2_i"
output: {
    'type': 'subscript_superscript_order',
    'message': 'ä¸Šä¸‹æ ‡é¡ºåºå»ºè®®è°ƒæ•´',
    'suggestion': 'å»ºè®®å…ˆå†™ä¸‹æ ‡å†å†™ä¸Šæ ‡ï¼šx_i^2 è€Œä¸æ˜¯ x^2_i',
    'corrected_version': 'x_i^2',
    'severity': 'info'
}

# æ£€æŸ¥å‡½æ•°å
input: "sin(x) + cos(x)"
output: {
    'type': 'function_names', 
    'message': 'æ•°å­¦å‡½æ•°åå»ºè®®ä½¿ç”¨åæ–œæ ',
    'suggestion': 'å»ºè®®ä½¿ç”¨ \\sin è€Œä¸æ˜¯ sin',
    'corrected_version': '\\sin(x) + \\cos(x)',
    'severity': 'warning'
}
```

### 2. å¢å¼ºéªŒè¯ç³»ç»Ÿ

```python
def enhanced_check_latex_answer(user_answer, target_answer):
    # åŸºç¡€æ­£ç¡®æ€§æ£€æŸ¥
    is_correct = check_latex_answer(user_answer, target_answer)
    
    if not is_correct:
        return {
            'result': 'incorrect',
            'isCorrect': False,
            'suggestions': [],
            'bestPractice': None
        }
    
    # è§„èŒƒæ€§æ£€æŸ¥
    issues = check_latex_standardness(user_answer)
    
    if issues:
        return {
            'result': 'correct_but_non_standard',
            'isCorrect': True,
            'suggestions': issues,
            'bestPractice': None
        }
    
    return {
        'result': 'perfect',
        'isCorrect': True,
        'suggestions': [],
        'bestPractice': None
    }
```

### 3. å‰ç«¯åé¦ˆæ˜¾ç¤º

```jsx
// å®Œå…¨æ­£ç¡®
âœ… å®Œå…¨æ­£ç¡®ï¼

// æ­£ç¡®ä½†ä¸è§„èŒƒ  
âœ… ç­”æ¡ˆæ­£ç¡®ï¼ âš ï¸ å»ºè®®æ”¹è¿›
ğŸ’¡ å»ºè®®ï¼šä½¿ç”¨ x_i^2 è€Œä¸æ˜¯ x^2_iï¼ˆå…ˆä¸‹æ ‡åä¸Šæ ‡ï¼‰

// é”™è¯¯
âŒ ç­”æ¡ˆä¸æ­£ç¡®
ğŸ’¡ æç¤ºï¼šæ£€æŸ¥ä¸Šä¸‹æ ‡çš„å†™æ³•
```

## æ”¯æŒçš„è§„èŒƒæ€§æ£€æŸ¥

### 1. ä¸Šä¸‹æ ‡é¡ºåº
- **é—®é¢˜**: `x^2_i` (å…ˆä¸Šæ ‡åä¸‹æ ‡)
- **å»ºè®®**: `x_i^2` (å…ˆä¸‹æ ‡åä¸Šæ ‡)
- **åŸå› **: ç¬¦åˆæ•°å­¦æ’ç‰ˆä¼ ç»Ÿ

### 2. å‡½æ•°åè§„èŒƒ
- **é—®é¢˜**: `sin(x)` (æ— åæ–œæ )
- **å»ºè®®**: `\sin(x)` (æœ‰åæ–œæ )
- **åŸå› **: ç¡®ä¿æ­£ç¡®å­—ä½“å’Œé—´è·

### 3. å¤§å‹è¿ç®—ç¬¦
- **é—®é¢˜**: `\sum^n_{i=1}` (ä¸Šæ ‡åœ¨å‰)
- **å»ºè®®**: `\sum_{i=1}^n` (ä¸‹æ ‡åœ¨å‰)
- **åŸå› **: æ ‡å‡†æ•°å­¦æ’ç‰ˆè§„èŒƒ

### 4. æ‹¬å·ä½¿ç”¨
- **é—®é¢˜**: `x^10` (å¤šå­—ç¬¦æ— æ‹¬å·)
- **å»ºè®®**: `x^{10}` (ä½¿ç”¨èŠ±æ‹¬å·)
- **åŸå› **: ç¡®ä¿æ­£ç¡®è§£æ

### 5. ç©ºæ ¼å¤„ç†
- **é—®é¢˜**: `a  +  b` (å¤šä½™ç©ºæ ¼)
- **å»ºè®®**: `a + b` (ç®€æ´æ ¼å¼)
- **åŸå› **: ä»£ç æ•´æ´æ€§

## æœ€ä½³å®è·µå†…å®¹ç³»ç»Ÿ

### å†…å®¹ç»“æ„
```json
{
  "id": "subscript_superscript_order",
  "category": "subscript_superscript",
  "title": {"zh": "ä¸Šä¸‹æ ‡ä¹¦å†™é¡ºåº", "en": "..."},
  "content": {"zh": "å»ºè®®å…ˆå†™ä¸‹æ ‡...", "en": "..."},
  "example": {
    "wrong": "x^2_i",
    "correct": "x_i^2", 
    "explanation": {"zh": "...", "en": "..."}
  },
  "level": "beginner",
  "triggers": ["subscript_superscript_order"]
}
```

### æ”¯æŒçš„åˆ†ç±»
- ä¸Šä¸‹æ ‡ (subscript_superscript)
- å‡½æ•°å (function_names)
- å¤§å‹è¿ç®—ç¬¦ (large_operators)
- æ‹¬å·ä½¿ç”¨ (brackets)
- ç©ºæ ¼å¤„ç† (spacing)

## ç”¨æˆ·ä½“éªŒè®¾è®¡

### 1. æ¸è¿›å¼åé¦ˆ
- ä¸æ‰“æ–­ç”¨æˆ·å­¦ä¹ æµç¨‹
- å¯é€‰æ‹©æŸ¥çœ‹è¯¦ç»†å»ºè®®
- æ”¯æŒéšè—/æ˜¾ç¤ºåˆ‡æ¢

### 2. è§†è§‰å±‚æ¬¡
- ç»¿è‰²ï¼šå®Œå…¨æ­£ç¡®
- ç»¿è‰²+é»„è‰²ï¼šæ­£ç¡®ä½†å¯æ”¹è¿›
- çº¢è‰²ï¼šé”™è¯¯

### 3. äº¤äº’è®¾è®¡
- ç‚¹å‡»æŸ¥çœ‹å»ºè®®è¯¦æƒ…
- æ˜¾ç¤ºä¿®æ­£ç‰ˆæœ¬
- æä¾›æœ€ä½³å®è·µç¤ºä¾‹

## æµ‹è¯•ç»“æœ

### è§„èŒƒæ€§æ£€æŸ¥å™¨æµ‹è¯•
```
âœ… ä¸Šä¸‹æ ‡é¡ºåºæ£€æŸ¥: é€šè¿‡
âœ… å‡½æ•°åæ£€æŸ¥: é€šè¿‡  
âœ… å¤§å‹è¿ç®—ç¬¦æ£€æŸ¥: é€šè¿‡
âœ… æ‹¬å·ä½¿ç”¨æ£€æŸ¥: é€šè¿‡
âœ… ç©ºæ ¼å¤„ç†æ£€æŸ¥: é€šè¿‡
```

### é›†æˆæµ‹è¯•
```
âœ… å®Œå…¨æ­£ç¡®ç­”æ¡ˆ: perfect
âœ… æ­£ç¡®ä½†ä¸è§„èŒƒ: correct_but_non_standard
âœ… é”™è¯¯ç­”æ¡ˆ: incorrect
```

## ä¸‹ä¸€æ­¥é›†æˆè®¡åˆ’

### é˜¶æ®µ1: åç«¯é›†æˆ (1å¤©)
1. å°† `enhanced_check_latex_answer` é›†æˆåˆ°ç°æœ‰API
2. ä¿®æ”¹ `/api/practice/submit` ç«¯ç‚¹
3. è¿”å›å¢å¼ºçš„éªŒè¯ç»“æœ

### é˜¶æ®µ2: å‰ç«¯é›†æˆ (1-2å¤©)
1. ä¿®æ”¹ `PracticeCard` ç»„ä»¶ä½¿ç”¨æ–°çš„åé¦ˆæ ¼å¼
2. é›†æˆ `EnhancedFeedback` ç»„ä»¶
3. æ·»åŠ ç”¨æˆ·è®¾ç½®é€‰é¡¹

### é˜¶æ®µ3: å†…å®¹å®Œå–„ (1å¤©)
1. æ‰©å±•æœ€ä½³å®è·µå†…å®¹
2. æ·»åŠ æ›´å¤šè§„èŒƒæ€§æ£€æŸ¥è§„åˆ™
3. æ”¯æŒå¤šè¯­è¨€

### é˜¶æ®µ4: ç”¨æˆ·æµ‹è¯• (1å¤©)
1. åŠŸèƒ½æµ‹è¯•
2. ç”¨æˆ·ä½“éªŒæµ‹è¯•
3. æ€§èƒ½ä¼˜åŒ–

## é…ç½®é€‰é¡¹

ç”¨æˆ·å¯ä»¥æ§åˆ¶ï¼š
- æ˜¯å¦æ˜¾ç¤ºè§„èŒƒæ€§å»ºè®®
- å»ºè®®çš„è¯¦ç»†ç¨‹åº¦
- æœ€ä½³å®è·µæç¤ºé¢‘ç‡
- åå¥½çš„æç¤ºç±»å‹

## æŠ€æœ¯ä¼˜åŠ¿

1. **æ¨¡å—åŒ–è®¾è®¡**: è§„èŒƒæ€§æ£€æŸ¥å™¨ç‹¬ç«‹ï¼Œæ˜“äºæ‰©å±•
2. **å¯é…ç½®**: ç”¨æˆ·å¯ä»¥è‡ªå®šä¹‰ä½“éªŒ
3. **å¤šè¯­è¨€æ”¯æŒ**: å†…å®¹æ”¯æŒä¸­è‹±æ–‡
4. **æ€§èƒ½å‹å¥½**: æ£€æŸ¥é€»è¾‘é«˜æ•ˆï¼Œä¸å½±å“å“åº”é€Ÿåº¦
5. **å‘åå…¼å®¹**: ä¸å½±å“ç°æœ‰åŠŸèƒ½

## æ€»ç»“

è¿™ä¸ªæ™ºèƒ½åé¦ˆç³»ç»Ÿå®Œç¾å®ç°äº†ç”¨æˆ·å»ºè®®çš„åŠŸèƒ½ï¼š

âœ… **"æ­£ç¡®ä½†ä¸è§„èŒƒ"è­¦å‘Šæœºåˆ¶**: é€šè¿‡è§„èŒƒæ€§æ£€æŸ¥å™¨å®ç°  
âœ… **LaTeXæœ€ä½³å®è·µæç¤ºåŠŸèƒ½**: é€šè¿‡å†…å®¹ç³»ç»Ÿå’ŒUIç»„ä»¶å®ç°  
âœ… **ç”¨æˆ·ä½“éªŒä¼˜åŒ–**: æ¸è¿›å¼ã€å¯é…ç½®çš„åé¦ˆè®¾è®¡  
âœ… **æŠ€æœ¯æ¶æ„**: æ¨¡å—åŒ–ã€å¯æ‰©å±•çš„è®¾è®¡  

ç”¨æˆ·ç°åœ¨å¯ä»¥ï¼š
1. è·å¾—æ›´ç²¾ç¡®çš„ç­”æ¡ˆåé¦ˆ
2. å­¦ä¹ LaTeXæœ€ä½³å®è·µ
3. é€æ­¥æé«˜ä»£ç è§„èŒƒæ€§
4. äº«å—ä¸ªæ€§åŒ–çš„å­¦ä¹ ä½“éªŒ

è¿™ä¸ªåŠŸèƒ½å°†æ˜¾è‘—æå‡ç”¨æˆ·çš„å­¦ä¹ ä½“éªŒå’ŒLaTeXæŠ€èƒ½æ°´å¹³ï¼
